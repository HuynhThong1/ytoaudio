
> ytomp3@0.1.0 test
> jest __tests__/ConverterForm.test.tsx

FAIL __tests__/ConverterForm.test.tsx
  ConverterForm
    ‚àö renders input and button (108 ms)
    ‚àö handles input change (12 ms)
    √ó shows error on failed fetch (1033 ms)
    √ó shows video info on success (1028 ms)

  ‚óè ConverterForm ‚Ä∫ shows error on failed fetch

    Unable to find role="alert"

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full max-w-xl mx-auto space-y-6"[39m
        [36m>[39m
          [36m<form[39m
            [33mclass[39m=[32m"space-y-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"flex items-center gap-2 select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50 text-lg font-medium"[39m
                [33mdata-slot[39m=[32m"label"[39m
                [33mfor[39m=[32m"url"[39m
              [36m>[39m
                [0mYouTube URL[0m
              [36m</label>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex gap-2"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input w-full min-w-0 rounded-md border px-3 py-1 shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex-1 h-12 text-lg bg-background/50 backdrop-blur-sm"[39m
                  [33mdata-slot[39m=[32m"input"[39m
                  [33mid[39m=[32m"url"[39m
                  [33mplaceholder[39m=[32m"https://www.youtube.com/watch?v=..."[39m
                  [33mtype[39m=[32m"url"[39m
                  [33mvalue[39m=[32m"invalid"[39m
                [36m/>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground hover:bg-primary/90 rounded-md has-[>svg]:px-4 h-12 px-6"[39m
                  [33mdata-slot[39m=[32m"button"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mFetch[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</form>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 42 |[39m         fireEvent[33m.[39mclick(button)[33m;[39m
     [90m 43 |[39m
    [31m[1m>[22m[39m[90m 44 |[39m         [36mconst[39m alert [33m=[39m [36mawait[39m screen[33m.[39mfindByRole([32m'alert'[39m)[33m;[39m
     [90m    |[39m                                    [31m[1m^[22m[39m
     [90m 45 |[39m         expect(alert)[33m.[39mtoHaveTextContent([35m/Invalid URL/i[39m)[33m;[39m
     [90m 46 |[39m     })[33m;[39m
     [90m 47 |[39m[0m

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.findByRole (__tests__/ConverterForm.test.tsx:44:36)

  ‚óè ConverterForm ‚Ä∫ shows video info on success

    Unable to find role="heading" and name `/Test Video/i`

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full max-w-xl mx-auto space-y-6"[39m
        [36m>[39m
          [36m<form[39m
            [33mclass[39m=[32m"space-y-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"flex items-center gap-2 select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50 text-lg font-medium"[39m
                [33mdata-slot[39m=[32m"label"[39m
                [33mfor[39m=[32m"url"[39m
              [36m>[39m
                [0mYouTube URL[0m
              [36m</label>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex gap-2"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input w-full min-w-0 rounded-md border px-3 py-1 shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex-1 h-12 text-lg bg-background/50 backdrop-blur-sm"[39m
                  [33mdata-slot[39m=[32m"input"[39m
                  [33mid[39m=[32m"url"[39m
                  [33mplaceholder[39m=[32m"https://www.youtube.com/watch?v=..."[39m
                  [33mtype[39m=[32m"url"[39m
                  [33mvalue[39m=[32m"https://youtube.com/watch?v=123"[39m
                [36m/>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground hover:bg-primary/90 rounded-md has-[>svg]:px-4 h-12 px-6"[39m
                  [33mdata-slot[39m=[32m"button"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mFetch[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</form>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-card-foreground flex flex-col gap-6 rounded-xl border py-6 w-full max-w-md mx-auto mt-6 overflow-hidden bg-card/50 backdrop-blur-sm border-primary/20 shadow-xl"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 p-0"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-full aspect-video"[39m
                [36m>[39m
                  [36m<img[39m
                    [33malt[39m=[32m"Test Video"[39m
                    [33mclass[39m=[32m"object-cover"[39m
                    [33mdata-nimg[39m=[32m"fill"[39m
                    [33mdecoding[39m=[32m"async"[39m
                    [33mloading[39m=[32m"lazy"[39m
                    [33msrc[39m=[32m"http://example.com/thumb.jpg"[39m
                    [33mstyle[39m=[32m"position: absolute; height: 100%; width: 100%; left: 0px; top: 0px; right: 0px; bottom: 0px; color: transparent;"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"p-4 space-y-2"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-lg font-bold line-clamp-2 leading-tight"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [0mTest Video[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center justify-between text-sm text-muted-foreground"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex items-center gap-1"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-user w-4 h-4"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"[39m
                      [36m/>[39m
                      [36m<circle[39m
                        [33mcx[39m=[32m"12"[39m
                        [33mcy[39m=[32m"7"[39m
                        [33mr[39m=[32m"4"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                    [36m<span>[39m
                      [0mTest Author[0m
                    [36m</span>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex items-center gap-1"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-clock w-4 h-4"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M12 6v6l4 2"[39m
                      [36m/>[39m
                      [36m<circle[39m
                        [33mcx[39m=[32m"12"[39m
                        [33mcy[39m=[32m"12"[39m
                        [33mr[39m=[32m"10"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                    [36m<span>[39m
                      [0m2:00[0m
                    [36m</span>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex flex-col gap-4 p-4 rounded-lg bg-secondary/20 border border-border"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-end gap-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1 space-y-2"[39m
                [36m>[39m
                  [36m<label[39m
                    [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                    [33mdata-slot[39m=[32m"label"[39m
                    [33mfor[39m=[32m"format"[39m
                  [36m>[39m
                    [0mSelect Format[0m
                  [36m</label>[39m
                  [36m<button[39m
                    [33maria-autocomplete[39m=[32m"none"[39m
                    [33maria-controls[39m=[32m"radix-_r_0_"[39m
                    [33maria-expanded[39m=[32m"false"[39m
                    [33mclass[39m=[32m"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 h-10 bg-background"[39m
                    [33mdata-size[39m=[32m"default"[39m
                    [33mdata-slot[39m=[32m"select-trigger"[39m
                    [33mdata-state[39m=[32m"closed"[39m
                    [33mdir[39m=[32m"ltr"[39m
                    [33mid[39m=[32m"format"[39m
                    [33mrole[39m=[32m"combobox"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mdata-slot[39m=[32m"select-value"[39m
                      [33mstyle[39m=[32m"pointer-events: none;"[39m
                    [36m>[39m
                      [0mMP3 (Audio)[0m
                    [36m</span>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-chevron-down size-4 opacity-50"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"m6 9 6 6 6-6"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                  [36m</button>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground hover:bg-primary/90 h-10 rounded-md px-6 has-[>svg]:px-4 w-full sm:w-auto gap-2"[39m
                  [33mdata-slot[39m=[32m"button"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-download w-4 h-4"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M12 15V3"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"m7 10 5 5 5-5"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mDownload MP3[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 66 |[39m         fireEvent[33m.[39mclick(button)[33m;[39m
     [90m 67 |[39m
    [31m[1m>[22m[39m[90m 68 |[39m         expect([36mawait[39m screen[33m.[39mfindByRole([32m'heading'[39m[33m,[39m { name[33m:[39m [35m/Test Video/i[39m }))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 69 |[39m         expect(screen[33m.[39mgetByText([35m/Test Author/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 70 |[39m         expect(screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/Download MP3/i[39m }))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 71 |[39m     })[33m;[39m[0m

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.findByRole (__tests__/ConverterForm.test.tsx:68:29)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 2 passed, 4 total
Snapshots:   0 total
Time:        3.761 s
Ran all test suites matching __tests__/ConverterForm.test.tsx.
